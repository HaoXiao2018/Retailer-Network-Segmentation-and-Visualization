<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="CircularDataGraph.css">
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="dimple.v2.3.0.min.js"></script>
	<script type="text/javascript" src="CircularDataGraph.js"></script>
	<script type="text/javascript" src="RetailerGraph.js"></script>

    <style>
    	body{
    		font-size: 1.2em;
    		font-family: "sans-serif";
			margin:0px;
			padding:0px;
			background-color: rgb(230,230,230);
    	}

    	.chartContainer {
    		float: left;
    		width: 32%;
    		height: 745px;
			background-color:white;
			padding: 5px;
			<!-- border: 1px black solid; -->
    	}

    	.networkContainerBig {
    		float: left;
    		width: 54%;
    		height: 745px;
			background-color:white;
			padding: 5px;
			<!-- border: 1px black solid; -->
    	}

    	.clusterFilter{
/*    		TO BE FILLED HERE*/
			text-align: center;
			margin-top: -10px;
    	}

    	.filterContainer {
    		float: right;		
    		width: 11%;
    		height: 745px;
			/* <!-- background-color:white; --> */
			padding:10px;
			/* <!-- border: 1px black solid; --> */
    	}

		.filterContainer h2{
			font-size:15px;
			font-family: arial;
			text-align:left;
			font-weight: normal;
			border-left:5px solid gray;
			margin-top:5px;
		}
		
		.filterContainer label{
			font-size:12px;
			font-family: arial;
			text-align:left;
			font-weight: normal;
		}
		
		.filterContainer .element{
			margin: 3px 0px;
		}
		
    	.filterSubcontainer { 
    		margin-top: 0px;
    		margin-bottom: 0px; 
    	}

    	.forms {
    		margin: 0px;
    	}

/*    	.heading {
    		border-left: double;
    	}
*/
    	.singleSelect {
    		margin-top: 15px;
    		margin-bottom: 15px;
    	}

    	.singleSelect label {
    		font-weight: 600;
		}

    	.multiSelect {
    		position: relative;
    		margin-top: 15px;
    		margin-bottom: 15px;
    		width: 95%;
    	}

    	.multiSelect label {
    		font-weight: 600;
		}

     	.form-control {
    		height: 250px;
    		width: 150px;
    		font-size: 11.5px;
			border: 1px solid gray;
			background-color: rgb(230,230,230);
    	}

		.rangeBox{
			margin-bottom: 15px;
		}

		.rangeBox input {
			width: 80px;
  			font-size: 10px;
		}

		.button_wrapper {
			margin-top: 10px;
			margin-bottom: 10px;
			display:inline-block;
			justify-content: center;
		}

		.button {
			width: 100px;
			height: 20px;
			color:white;
			background-color: gray;
			align-items: center;
			justify-content: center;
			display: flex;
			font-weight: bold;
		}
		
		.dimple-storyboard-label{
			text-align:right;
		};

    </style>
</head>


<body>
	<div class="chartContainer" id="chartContainer"></div>
	
	<div class="networkContainerBig" id="networkContainerBig">
		<p style="margin:0;margin-right:10%;font-size:25px;font-family:arial;font-weight:bold;text-align:center;">ShopRunner Retailer Network</p>
		<div class="networkContainer" id="networkContainer"></div>
		<div class="clusterFilter" style="float:none;font-family:arial;font-size:15px">
			<font>Clusters:&nbsp;&nbsp;</font>
			<span class="checkbox-wrapper">
				<input type="checkbox" class="checkbox_cluster" id="cluster_1" name="cluster_1" value="1">
				<label for="cluster_1" class="cluster_label" value="1">Isolated</label>
			</span>
			<span class="checkbox-wrapper">
				<input type="checkbox" class="checkbox_cluster" id="cluster_2" name="cluster_2" value="2">
				<label for="cluster_2" class="cluster_label" value="2">Climber</label>
			</span>
			<span class="checkbox-wrapper">
				<input type="checkbox" class="checkbox_cluster" id="cluster_3" name="cluster_3" value="3">
				<label for="cluster_3" class="cluster_label" value="3">Bridge</label>
			</span>
			<span class="checkbox-wrapper">
				<input type="checkbox" class="checkbox_cluster" id="cluster_4" name="cluster_4" value="4">
				<label for="cluster_4" class="cluster_label" value="4">Star</label>
			</span>
			<span class="checkbox-wrapper">
				<input type="checkbox" class="checkbox_cluster" id="cluster_5" name="cluster_5" value="5">
				<label for="cluster_5" class="cluster_label" value="5">Diamond</label>
			</span>
		</div>
	</div>
	
	

	<div class="filterContainer" id="filterContainer">
		<div class="heading">
			<h2 style="margin: 0;margin-top:10px;">&nbsp;Network Filter</h2>
		</div>
		
		<div class="filterSubcontainer">	
			<form class = "forms" id="form1" name="formname" action="submitform.asp" method="post">
				<div class = "singleSelect element">
					<label for="singleSelect">Price Range</label>
						<br>
						<input type="checkbox" class="checkbox_pricerange" id="mass_market" name="mass_market" value="Mass Market" checked>
						<label for="mass_market" style="font-weight: 300;">Mass Market</label>
						<br>
						<input type="checkbox" class="checkbox_pricerange" id="bridge" name="bridge" value="Bridge" checked>
						<label for="bridge" style="font-weight: 300;">Bridge</label>
						<br>
						<input type="checkbox" class="checkbox_pricerange" id="luxury" name="luxury" value="Luxury" checked>
						<label for="luxury" style="font-weight: 300;">Luxury</label>
				</div>
				<div class="multiSelect element">
					<label for="categorySelect">Category</label>
					<br>
					  <form action="post">
						  <select multiple class="form-control" id="categorySelect" style="height: 150px;">
							<option id="automotive" value="Automotive">Automotive</option>
							<option id="babies, kids & toys" value="Babies, Kids & Toys">Babies, Kids & Toys</option>
							<option id="books, movies & music" value="Books, Movies & Music">Books, Movies & Music</option>
							<option id="clothing & accessories" value="Clothing & Accessories">Clothing & Accessories</option>
							<option id="electronics" value="Electronics">Electronics</option>
							<option id="food & gifts" value="Food & Gifts">Food & Gifts</option>
							<option id="health & beauty" value="Health & Beauty">Health & Beauty</option>
							<option id="home" value="Home">Home</option>
							<option id="jewelry" value="Jewelry">Jewelry</option>
							<option id="shoes" value="Shoes">Shoes</option>
							<option id="sporting goods" value="Sporting Goods">Sporting goods</option>
						  </select>
					</form>
				</div>
				<div class = "singleSelect element">
					<label for="singleSelect">Sales Amount</label>
					<div class="rangeBox" style="margin: 0;">
						<font size="-1.3" style="font-family:arial;">min</font>
                        <input type="number" name="sales_min" id="sales_min" value=0><br/> 
                        <font size="-1.3" style="font-family:arial;">max</font>
                        <input type="number" name="sales_max" id="sales_max" value=500000000>
					</div>
				</div>
				<div class = "singleSelect element">
					<label for="singleSelect">Cross-sell Minimum</label>
					<div class="rangeBox"style="margin: 0;">
						<input type="number" name="cs" id="cs" value=50000>			
					</div>	
				</div>
				<div class="button_wrapper element">
						<button class="button" name="submit_network" id="submit_network">Submit</button>
				</div>
			</form>
		</div>
		<br>
		<div class="heading">
			<h2 style="margin: 0px">&nbsp;Retailer Filter</h2>
		</div>

		<div class="filterSubcontainer">	

			<form class = "forms" id="form2" name="formname" action="submitform.asp" method="post">

				<div class="multiSelect element">
					<label for="sel2">Competitiors:</label>
					<br>
						<form action="post">
							<select multiple class="form-control" id="select_competitors" style="height: 180px;">
								<option value="1-800-Baskets">1-800-Baskets</option>
								<option value="1-800-Flowers">1-800-Flowers</option>
								<option value="7 For All Mankind">7 For All Mankind</option>
								<option value="AHAVA">AHAVA</option>
								<option value="Alexis Bittar">Alexis Bittar</option>
								<option value="Alice and Olivia">Alice and Olivia</option>
								<option value="Allen Edmonds">Allen Edmonds</option>
								<option value="American Eagle">American Eagle</option>
								<option value="Andrew Marc">Andrew Marc</option>
								<option value="Ann Taylor">Ann Taylor</option>
								<option value="Aquatalia">Aquatalia</option>
								<option value="AT-A-GLANCE">AT-A-GLANCE</option>
								<option value="AutoZone">AutoZone</option>
								<option value="AVON">AVON</option>
								<option value="Bailey44">Bailey44</option>
								<option value="BCBG">BCBG</option>
								<option value="Beauty Habit">Beauty Habit</option>
								<option value="bebe">bebe</option>
								<option value="Bergdorf Goodman">Bergdorf Goodman</option>
								<option value="Bergners">Bergners</option>
								<option value="Bloomingdale's">Bloomingdale's</option>
								<option value="Bon-Ton">Bon-Ton</option>
								<option value="Boston Store">Boston Store</option>
								<option value="Brahmin">Brahmin</option>
								<option value="Brooks Brothers">Brooks Brothers</option>
								<option value="Build-A-Bear">Build-A-Bear</option>
								<option value="Callaway Apparel">Callaway Apparel</option>
								<option value="Calvin Klein">Calvin Klein</option>
								<option value="Carsons">Carsons</option>
								<option value="Cheryls">Cheryls</option>
								<option value="Christopher & Banks">Christopher & Banks</option>
								<option value="Clarisonic">Clarisonic</option>
								<option value="Cole Haan">Cole Haan</option>
								<option value="Coyuchi">Coyuchi</option>
								<option value="CUBAVERA">CUBAVERA</option>
								<option value="CURRENT/ELLIOTT">CURRENT/ELLIOTT</option>
								<option value="Day-Timer">Day-Timer</option>
								<option value="Donald J Pliner">Donald J Pliner</option>
								<option value="Donna Karan">Donna Karan</option>
								<option value="Eagle Creek">Eagle Creek</option>
								<option value="eBags">eBags</option>
								<option value="Eddie Bauer">Eddie Bauer</option>
								<option value="Elder-Beerman">Elder-Beerman</option>
								<option value="Elizabeth Arden">Elizabeth Arden</option>
								<option value="Equipment">Equipment</option>
								<option value="Everything But Water">Everything But Water</option>
								<option value="Express">Express</option>
								<option value="Fanatics">Fanatics</option>
								<option value="FansEdge">FansEdge</option>
								<option value="fathead.com">fathead.com</option>
								<option value="Five Star">Five Star</option>
								<option value="FOXYBAE">FOXYBAE</option>
								<option value="FragranceNet.com">FragranceNet.com</option>
								<option value="Franklin Covey">Franklin Covey</option>
								<option value="fruit bouquets">fruit bouquets</option>
								<option value="FRYE">FRYE</option>
								<option value="G.H.Bass & Co">G.H.Bass & Co</option>
								<option value="Giorgio Armani Beauty">Giorgio Armani Beauty</option>
								<option value="Glasses">Glasses</option>
								<option value="GNC">GNC</option>
								<option value="GoreApparel.com">GoreApparel.com</option>
								<option value="Hale Bob">Hale Bob</option>
								<option value="Halsbrook">Halsbrook</option>
								<option value="Harry and David">Harry and David</option>
								<option value="Henri Bendel">Henri Bendel</option>
								<option value="Herbergers">Herbergers</option>
								<option value="Hugo Boss">Hugo Boss</option>
								<option value="IT Cosmetics">IT Cosmetics</option>
								<option value="Jack Rabbit">Jack Rabbit</option>
								<option value="Jack Spade">Jack Spade</option>
								<option value="Jared">Jared</option>
								<option value="Jimmy Choo">Jimmy Choo</option>
								<option value="Jockey">Jockey</option>
								<option value="Joe's Jeans">Joe's Jeans</option>
								<option value="JOIE">JOIE</option>
								<option value="JR Dunn">JR Dunn</option>
								<option value="Juicy Couture">Juicy Couture</option>
								<option value="Karl Lagerfeld Paris">Karl Lagerfeld Paris</option>
								<option value="Kate Spade New York">Kate Spade New York</option>
								<option value="Kay Jewelers">Kay Jewelers</option>
								<option value="Kay Outlet">Kay Outlet</option>
								<option value="Kiehl's">Kiehl's</option>
								<option value="Lancome">Lancome</option>
								<option value="LastCall">LastCall</option>
								<option value="LD Products">LD Products</option>
								<option value="Lord & Taylor">Lord & Taylor</option>
								<option value="Lucky Brand">Lucky Brand</option>
								<option value="Lucky Vitamin">Lucky Vitamin</option>
								<option value="MacMall">MacMall</option>
								<option value="MAJE">MAJE</option>
								<option value="Mead">Mead</option>
								<option value="MILLY">MILLY</option>
								<option value="Minibar Delivery">Minibar Delivery</option>
								<option value="MLB">MLB</option>
								<option value="NASCAR.com Superstore">NASCAR.com Superstore</option>
								<option value="NBA Store">NBA Store</option>
								<option value="Neiman Marcus">Neiman Marcus</option>
								<option value="New York and Company">New York and Company</option>
								<option value="Newegg">Newegg</option>
								<option value="NFLShop">NFLShop</option>
								<option value="Nic+Zoe">Nic+Zoe</option>
								<option value="Not Your Daughters Jeans">Not Your Daughters Jeans</option>
								<option value="Original Penguin">Original Penguin</option>
								<option value="Peets">Peets</option>
								<option value="Perry Ellis">Perry Ellis</option>
								<option value="PJ Salvage">PJ Salvage</option>
								<option value="Pure Formulas">Pure Formulas</option>
								<option value="Ramy Brook">Ramy Brook</option>
								<option value="Ray-Ban">Ray-Ban</option>
								<option value="Rebecca Taylor">Rebecca Taylor</option>
								<option value="Reeds Jewelers, Inc.">Reeds Jewelers, Inc.</option>
								<option value="Road Runner Sports">Road Runner Sports</option>
								<option value="Saks Fifth Avenue">Saks Fifth Avenue</option>
								<option value="Saks Fifth Avenue OFF 5TH">Saks Fifth Avenue OFF 5TH</option>
								<option value="Sam Edelman">Sam Edelman</option>
								<option value="Sandro">Sandro</option>
								<option value="Shinola">Shinola</option>
								<option value="Shop PBS">Shop PBS</option>
								<option value="SHOP.NHL.com">SHOP.NHL.com</option>
								<option value="Simply Chocolate">Simply Chocolate</option>
								<option value="Sole Society">Sole Society</option>
								<option value="SPACENK">SPACENK</option>
								<option value="Speedo">Speedo</option>
								<option value="Splendid">Splendid</option>
								<option value="STAPLES">STAPLES</option>
								<option value="Steiner Sports">Steiner Sports</option>
								<option value="Sterling Jewelers">Sterling Jewelers</option>
								<option value="StriVectin Operating Company">StriVectin Operating Company</option>
								<option value="Stuart Weitzman">Stuart Weitzman</option>
								<option value="TaylorMade Golf">TaylorMade Golf</option>
								<option value="The Popcorn Factory">The Popcorn Factory</option>
								<option value="Theory">Theory</option>
								<option value="Timberland">Timberland</option>
								<option value="Tommy Hilfiger">Tommy Hilfiger</option>
								<option value="Tory Burch">Tory Burch</option>
								<option value="Under Armour">Under Armour</option>
								<option value="Urban Decay">Urban Decay</option>
								<option value="Vera Bradley">Vera Bradley</option>
								<option value="Veronica Beard">Veronica Beard</option>
								<option value="Vince">Vince</option>
								<option value="White + Warren">White + Warren</option>
								<option value="Wilsons Leather">Wilsons Leather</option>
								<option value="WOLFERMANS">WOLFERMANS</option>
								<option value="Younkers">Younkers</option>
								<option value="Yumi Kim">Yumi Kim</option>
								<option value="Yves Saint Laurent">Yves Saint Laurent</option>']						
							</select>
						</form>
				</div>

				<div class="button_wrapper element">
					<button class="button" name="submit_retailer" id="submit_retailer" >Submit</button>
				</div>
			</form>
		</div>
	
	
	
	
	</div>
</body>

<script>
	
	console.log('Page started.');
	
	var price_ranges = new Set(["Mass Market","Bridge","Luxury"]);
	var categories = new Set(['Food & Gifts', 'Home', 'Health & Beauty', 'Shoes',
   'Clothing & Accessories', 'Babies, Kids & Toys', 'Jewelry',
   'Electronics', 'Sporting Goods', 'Books, Movies & Music','Automotive']);
	var threshold = 50000;
	var salesRange = [0,500000000];
	
	CircularGraph.init('data/nodes.csv', 'data/links.csv', price_ranges, categories, salesRange, threshold);
	RetailerGraph.show("Saks Fifth Avenue",["Lord & Taylor", "Neiman Marcus", "Bloomingdale's"]);
	
	updateNetwork = function(){
		var price_ranges = new Set();
		$('input[class="checkbox_pricerange"]:checked').each(function(){
			price_ranges.add(this.value);
		});
		var categories = new Set($('select#categorySelect').val());
		if(categories.size == 0){
			categories = new Set(['Food & Gifts', 'Home', 'Health & Beauty', 'Shoes',
	   'Clothing & Accessories', 'Babies, Kids & Toys', 'Jewelry',
	   'Electronics', 'Sporting Goods', 'Books, Movies & Music','Automotive']);
		}
		var clusters = new Set();
		$('input[class="checkbox_cluster"]:checked').each(function() {
			clusters.add(+this.value);
		});
		var salesRange = [+($('input[id="sales_min"]').val()),+($('input[id="sales_max"]').val())];
		var threshold = +($('input[id="cs"]').val());
		
		CircularGraph.update(clusters, price_ranges, categories, salesRange, threshold);
	};
	
	
	$('.checkbox_cluster').change(updateNetwork);
	
	$("#submit_network").click(updateNetwork);
	
	$("#submit_retailer").click(function(){
		var competitors = $('select#select_competitors').val();
		if(competitors.length == 0){
			competitors = ["Saks Fifth Avenue", "Neiman Marcus", "Bloomingdale's"];
		};
		var focal_retailer = d3.select("#chartContainer").select("#focalretailer").attr("focal");
		RetailerGraph.show(focal_retailer,competitors);
	});

	

</script>
